<Project>
    <PropertyGroup>
         <!-- A flag representing this package existing in a project.  -->
        <SDKContainerSupportEnabled>true</SDKContainerSupportEnabled>
        <ContainerTaskFolderName>tasks</ContainerTaskFolderName>
        <ContainerTaskFramework Condition="'$(MSBuildRuntimeType)' == 'Core'">net11.0</ContainerTaskFramework>
        <ContainerTaskFramework Condition="'$(MSBuildRuntimeType)' == 'Full'">net472</ContainerTaskFramework>
        <CreateLayerTarballFolderName>CreateLayerTarball</CreateLayerTarballFolderName>
        <!--The folder where the custom task will be present. It points to inside the nuget package. -->
        <ContainerCustomTasksFolder>$(MSBuildThisFileDirectory)..\$(ContainerTaskFolderName)\$(ContainerTaskFramework)\</ContainerCustomTasksFolder>
        <CreateLayerTarballFolder>$(MSBuildThisFileDirectory)..\$(CreateLayerTarballFolderName)\</CreateLayerTarballFolder>
        <!--Reference to the assembly which contains the MSBuild Task-->
        <ContainerCustomTasksAssembly Condition="'$(ContainerCustomTasksAssembly)' == ''">$(ContainerCustomTasksFolder)$(MSBuildThisFileName).dll</ContainerCustomTasksAssembly>
    </PropertyGroup>

    <!--Register our custom task-->
    <UsingTask TaskName="$(MSBuildThisFileName).Tasks.ComputeDotnetBaseImageAndTag" AssemblyFile="$(ContainerCustomTasksAssembly)"/>
    <UsingTask TaskName="$(MSBuildThisFileName).Tasks.CreateAppLayer" AssemblyFile="$(ContainerCustomTasksAssembly)"/>
    <UsingTask TaskName="$(MSBuildThisFileName).Tasks.CreateImageIndex" AssemblyFile="$(ContainerCustomTasksAssembly)"/>
    <UsingTask TaskName="$(MSBuildThisFileName).Tasks.CreateNewImage" AssemblyFile="$(ContainerCustomTasksAssembly)"/>
    <UsingTask TaskName="$(MSBuildThisFileName).Tasks.DownloadContainerManifest" AssemblyFile="$(ContainerCustomTasksAssembly)"/>
    <UsingTask TaskName="$(MSBuildThisFileName).Tasks.DownloadLayers" AssemblyFile="$(ContainerCustomTasksAssembly)"/>
    <UsingTask TaskName="$(MSBuildThisFileName).Tasks.MakeContainerTarball" AssemblyFile="$(ContainerCustomTasksAssembly)"/>
    <UsingTask TaskName="$(MSBuildThisFileName).Tasks.ParseContainerProperties" AssemblyFile="$(ContainerCustomTasksAssembly)"/>
    <UsingTask TaskName="$(MSBuildThisFileName).Tasks.PushContainerToLocal" AssemblyFile="$(ContainerCustomTasksAssembly)"/>
    <UsingTask TaskName="$(MSBuildThisFileName).Tasks.PushContainerToRemoteRegistry" AssemblyFile="$(ContainerCustomTasksAssembly)"/>
    <UsingTask TaskName="$(MSBuildThisFileName).Tasks.SelectRuntimeIdentifierSpecificItems" AssemblyFile="$(ContainerCustomTasksAssembly)"/>
</Project>
