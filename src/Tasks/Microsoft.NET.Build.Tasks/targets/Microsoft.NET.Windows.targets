<!--
***********************************************************************************************
Microsoft.NET.Windows.targets

WARNING:  DO NOT MODIFY this file unless you are knowledgeable about MSBuild and have
          created a backup copy.  Incorrect changes to this file will make it
          impossible to load or build your projects from the command-line or the IDE.

Copyright (c) .NET Foundation. All rights reserved.
***********************************************************************************************
-->

<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup Condition=" '$(DisableImplicitFrameworkReferences)' != 'true'
                             and '$(TargetFrameworkIdentifier)' == '.NETCoreApp'
                             and $([MSBuild]::VersionGreaterThanOrEquals($(_TargetFrameworkVersionWithoutV), '5.0'))
                             and '$(TargetPlatformIdentifier)' == 'Windows'
                             and '$(TargetPlatformVersion)' != ''
                             and $([MSBuild]::VersionGreaterThanOrEquals($(TargetPlatformVersion), '10.0')) ">
    <_IncludeWindowsSDKRefFrameworkReferences>true</_IncludeWindowsSDKRefFrameworkReferences>
  </PropertyGroup>

  <!-- Set 7.0 as the TargetPlatformVersion for windows. -->
  <PropertyGroup Condition="'$(TargetPlatformIdentifier)' == 'windows' and '$(TargetPlatformVersion)' == ''" >
    <TargetPlatformVersion>7.0</TargetPlatformVersion>
  </PropertyGroup>

  <UsingTask TaskName="CheckForUnsupportedWindowsTargetPlatformVersion" AssemblyFile="$(MicrosoftNETBuildTasksAssembly)" />
  <Target Name="_CheckForUnsupportedTargetPlatformVersion" BeforeTargets="ResolveFrameworkReferences"
         Condition="'$(_IncludeWindowsSDKRefFrameworkReferences)' == 'true'">

    <CheckForUnsupportedWindowsTargetPlatformVersion
                            KnownFrameworkReferences="@(KnownFrameworkReference)"
                            TargetFrameworkIdentifier="$(TargetFrameworkIdentifier)"
                            TargetFrameworkVersion="$(_TargetFrameworkVersionWithoutV)"
                            TargetPlatformIdentifier="$(TargetPlatformIdentifier)"
                            TargetPlatformVersion="$(TargetPlatformVersion)"
                            WinRTApisPackageName="$(_WinRTApisPackageName)"/>
  </Target>
</Project>
