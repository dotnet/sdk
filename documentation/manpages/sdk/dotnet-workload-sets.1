.\" Automatically generated by Pandoc 2.18
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "dotnet-workload-sets" "1" "2024-10-02" "" ".NET Documentation"
.hy
.SH .NET SDK workload sets
.PP
The \f[I]workload sets\f[R] feature provides a version number that represents a group of .NET SDK workloads.
The install, update, and restore commands use this number in \f[I]workload-set update mode\f[R] to provide the following benefits:
.IP \[bu] 2
You control the cadence of change for installed workload versions.
The alternative mode of operation without using workload sets is called \f[I]loose manifests update mode\f[R].
In this mode, workloads are updated automatically as new versions of individual workloads are released onto any configured NuGet feeds.
In \f[V]workload-set\f[R] update mode, workloads stay at a specific workload-set version until you explicitly change that version.
.IP \[bu] 2
You can install and update a combination of workload versions that ship at the same time and are known to work together.
.IP \[bu] 2
You can ensure that everyone on your team is always working on the same workload versions.
.IP \[bu] 2
You don\[cq]t have to use a rollback file to specify what workload version you want to be on.
.PP
Here are some ways you can use workload sets:
.IP \[bu] 2
\[lq]Pin\[rq] the \f[V]install\f[R] command to a specific workload-set version.
.IP \[bu] 2
Update installed workloads to the latest available workload-set version.
.IP \[bu] 2
Update to a specified workload-set version.
.IP \[bu] 2
Specify the workload-set version in global.json.
.IP \[bu] 2
Check your current update mode and workload-set version.
.PP
And you can still choose to install, update, or restore to the latest version of each individual workload, ignoring workload sets.
.SS Prerequisites
.IP \[bu] 2
\&.NET 8.0.400 SDK (https://dotnet.microsoft.com/en-us/download/dotnet/8.0) or later.
.RS 2
.PP
In 8.0.400 SDK, the \f[V]dotnet workload\f[R] commands are in workload-set update mode only when it\[cq]s explicitly selected.
.RE
.SS \[lq]Pin\[rq] the install command
.PP
A \f[V]dotnet workload install\f[R] command with the \f[V]--version\f[R] option \[lq]pins\[rq] the \f[V]install\f[R] command in \f[V]workload-set\f[R] update mode with the specified workload-set version.
The command no longer automatically installs the newest workload based on loose manifests.
.PP
To \[lq]pin\[rq] the \f[V]install\f[R] command:
.IP "1." 3
Choose a workload-set version.
For example, \f[V]9.0.100-preview.7.24414.1\f[R].
.IP "2." 3
Choose a workload.
For example, \f[V]aspire\f[R].
.IP "3." 3
.IP
.nf
\f[C]
   dotnet workload install aspire --version 9.0.100-preview.7.24414.1
\f[R]
.fi
.RS 4
.PP
When this command runs:
.IP \[bu] 2
It selects \f[V]workload-set\f[R] update mode if that isn\[cq]t already selected.
.IP \[bu] 2
It gets the workload set that has the specified version.
.IP \[bu] 2
From the workload set, it gets the manifest version of the specified workload.
.IP \[bu] 2
It installs the manifest version of the workload.
.IP \[bu] 2
It stays in \f[V]workload-set\f[R] update mode when it\[cq]s done.
.RE
.IP "4." 3
Choose another workload to install, such as \f[V]maui-ios\f[R].
.IP "5." 3
.IP
.nf
\f[C]
   dotnet workload install maui-ios
\f[R]
.fi
.RS 4
.PP
This command installs the \f[V]maui-ios\f[R] workload using the workload version from the workload set version \f[V]9.0.100-preview.7.24414.1\f[R], since the preceding \f[V]install\f[R] command example pinned that workload set.
.RE
.PP
Using \f[V]--version\f[R] with either \f[V]install\f[R] or \f[V]update\f[R] pins \f[V]install\f[R] to the specified version, but \f[V]update\f[R] is only configured for \f[V]workload-set\f[R] update mode, not to a specific workload-set version.
If you then run \f[V]dotnet workload update\f[R] without the \f[V]--version\f[R] option, the \f[V]update\f[R] command:
.IP \[bu] 2
Updates workloads to the latest available workload-set version.
.IP \[bu] 2
\[lq]Unpins\[rq] the \f[V]install\f[R] command.
.IP \[bu] 2
Stays in \f[V]workload-set\f[R] update mode.
.SS Update using latest workload set
.PP
To update installed workloads to the latest workload-set version available on the configured feeds, run the following commands:
.IP "1." 3
.IP
.nf
\f[C]
   dotnet workload config --update-mode workload-set
\f[R]
.fi
.RS 4
.PP
The preceding command is necessary only if you are currently in manifests update mode.
If you don\[cq]t know, check the current update mode.
.RE
.IP "2." 3
.IP
.nf
\f[C]
   dotnet workload update
\f[R]
.fi
.RS 4
.PP
In \f[V]workload-set\f[R] update mode, this command updates workloads to the latest workload-set version, unless you have specified the workload-set version in global.json.
.RE
.SS Update to a workload-set version
.PP
To specify a workload-set version to update to when you\[cq]re not specifying it in global.json, use the \f[V]--version\f[R] option of the \f[V]update\f[R] command:
.IP "1." 3
Choose a workload-set version.
For example, \f[V]8.0.400\f[R].
.IP "2." 3
.IP
.nf
\f[C]
   dotnet workload update --version 8.0.400
\f[R]
.fi
.PP
\f[V]workload-set\f[R] update mode will be selected if it wasn\[cq]t already selected.
.SS Use global.json for the workload-set version
.PP
To use a \f[V]global.json\f[R] file to specify the workload-set version for a repository:
.IP "1." 3
Choose a workload-set version.
For example, \f[V]9.0.100-preview.7.24414.1\f[R].
.IP "2." 3
Create a \f[V]global.json\f[R] file that looks like the following example:
.RS 4
.IP
.nf
\f[C]
{
  \[dq]sdk\[dq]: {
    \[dq]workloadVersion\[dq]: \[dq]9.0.100-preview.7.24414.1\[dq]
  }
}
\f[R]
.fi
.RE
.PP
With the current directory in the same repository and the CLI in \f[V]workload-set\f[R] update mode, the \f[V]install\f[R], \f[V]update\f[R], and \f[V]restore\f[R] commands install workloads for the specified workload-set version.
If you don\[cq]t have a global.json file, and you\[cq]re in \f[V]workload-set\f[R] update mode, the \f[V]restore\f[R] command installs the workload-set version that was established when you switched from manifests update mode to \f[V]workload-set\f[R] update mode.
.PP
If you have a workload-set version in the global.json file, the workload commands are in \f[V]workload-set\f[R] mode even if you haven\[cq]t run the \f[V]config\f[R] command or used \f[V]--version\f[R].
The global.json file overrides those.
To use the \f[V]--version\f[R] option in that case, run the command outside of the path containing the global.json file.
.PP
If you don\[cq]t specify the workload-set version in global.json, you can use the \f[V]--version\f[R] option with the \f[V]restore\f[R] comand.
In that case, the \f[V]restore\f[R] command selects \f[V]workload-set\f[R] update mode before it restores workloads to the specified workload-set version.
.PP
In manifests update mode, \f[V]restore\f[R] installs or updates workloads to the latest version of each individual workload.
.SS Check the update mode and version
.PP
To see the current update mode, run the \f[V]config\f[R] command with the \f[V]--update-mode\f[R] option without an argument.
The mode is either workload-set\f[V]or\f[R]manifests\[ga].
For example:
.IP
.nf
\f[C]
dotnet workload config --update-mode
\f[R]
.fi
.IP
.nf
\f[C]
workload-set
\f[R]
.fi
.PP
To see the current workload-set version, run \f[V]dotnet workload --version\f[R].
If a workload set is installed, you see a version such as 9.0.100-preview.7.24414.1 or 8.0.402.
For example:
.IP
.nf
\f[C]
dotnet workload --version
\f[R]
.fi
.IP
.nf
\f[C]
9.0.100-preview.7.24414.1
\f[R]
.fi
.PP
In manifests mode, or if the workload-set version isn\[cq]t established yet after switching to \f[V]workload-set\f[R] update mode, you see a version in the form of \f[V]<feature band>-manifests.<hash>\f[R].
For example:
.IP
.nf
\f[C]
dotnet workload --version
\f[R]
.fi
.IP
.nf
\f[C]
9.0.100-manifests.cf958b56
\f[R]
.fi
.SS Choose a workload-set version
.PP
Workload sets are published to nuget.org with each release of the .NET SDK, under the package ID \f[V]Microsoft.NET.Workloads.<feature band>\f[R].
For a stable version of the SDK, we plan on always having a matching workload-set version.
So 8.0.400 SDK can install an 8.0.400 workload set, 401 can install a 401 set.
In general, we recommend that you install the matching workload set for a stable SDK.
.PP
For preview releases, find the corresponding workload-set version in the package\[cq]s README tab.
For example, see the README tab for the .NET 9 Preview 7 package (https://www.nuget.org/packages/Microsoft.NET.Workloads.9.0.100-preview.7/9.100.0-preview.7.24414.1#readme-body-tab).
.PP
This is a preview release.
In the future we\[cq]ll give you ways to list workload set versions to see what\[cq]s available and what they contain.
.SS Ignore workload sets
.PP
To install, or update to, the latest version of each individual workload available on the configured feeds, select and use manifests update mode by running the workload \f[V]config\f[R] command:
.IP
.nf
\f[C]
dotnet workload config --update-mode manifests
\f[R]
.fi
.PP
In .NET 8.0.4xx SDK, manifests mode is the default.
You need to select manifests mode explicitly only if you earlier explicitly selected \f[V]workload-set\f[R] update mode.
.SS Related content
.IP \[bu] 2
dotnet workload command
.IP \[bu] 2
dotnet workload install
.IP \[bu] 2
dotnet workload update
