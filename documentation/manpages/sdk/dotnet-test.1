'\" t
.\" Automatically generated by Pandoc 2.14.1
.\"
.TH "" "1" "" "" ".NET"
.hy
.SH dotnet test
.PP
\f[B]This article applies to:\f[R] \[u2714]\[uFE0F] .NET Core 2.1 SDK and later versions
.SH NAME
.PP
\f[C]dotnet test\f[R] - .NET test driver used to execute unit tests.
.SH SYNOPSIS
.IP
.nf
\f[C]
dotnet test [<PROJECT> | <SOLUTION> | <DIRECTORY> | <DLL>]
    [-a|--test-adapter-path <ADAPTER_PATH>] [--arch <ARCHITECTURE>]
    [--blame] [--blame-crash]
    [--blame-crash-dump-type <DUMP_TYPE>] [--blame-crash-collect-always]
    [--blame-hang] [--blame-hang-dump-type <DUMP_TYPE>]
    [--blame-hang-timeout <TIMESPAN>]
    [-c|--configuration <CONFIGURATION>]
    [--collect <DATA_COLLECTOR_NAME>]
    [-d|--diag <LOG_FILE>] [-f|--framework <FRAMEWORK>]
    [--filter <EXPRESSION>] [--interactive]
    [-l|--logger <LOGGER>] [--no-build]
    [--nologo] [--no-restore] [-o|--output <OUTPUT_DIRECTORY>] [--os <OS>]
    [-r|--results-directory <RESULTS_DIR>] [--runtime <RUNTIME_IDENTIFIER>]
    [-s|--settings <SETTINGS_FILE>] [-t|--list-tests]
    [-v|--verbosity <LEVEL>] [[--] <RunSettings arguments>]

dotnet test -h|--help
\f[R]
.fi
.SH DESCRIPTION
.PP
The \f[C]dotnet test\f[R] command is used to execute unit tests in a given solution.
The \f[C]dotnet test\f[R] command builds the solution and runs a test host application for each test project in the solution.
The test host executes tests in the given project using a test framework, for example: MSTest, NUnit, or xUnit, and reports the success or failure of each test.
If all tests are successful, the test runner returns 0 as an exit code; otherwise if any test fails, it returns 1.
.PP
For multi-targeted projects, tests are run for each targeted framework.
The test host and the unit test framework are packaged as NuGet packages and are restored as ordinary dependencies for the project.
.PP
Test projects specify the test runner using an ordinary \f[C]<PackageReference>\f[R] element, as seen in the following sample project file:
.PP
[!code-xmlXUnit Basic Template]
.PP
Where \f[C]Microsoft.NET.Test.Sdk\f[R] is the test host, \f[C]xunit\f[R] is the test framework.
And \f[C]xunit.runner.visualstudio\f[R] is a test adapter, which allows the xUnit framework to work with the test host.
.SS Implicit restore
.PP
You don\[cq]t have to run \f[C]dotnet restore\f[R] because it\[cq]s run implicitly by all commands that require a restore to occur, such as \f[C]dotnet new\f[R], \f[C]dotnet build\f[R], \f[C]dotnet run\f[R], \f[C]dotnet test\f[R], \f[C]dotnet publish\f[R], and \f[C]dotnet pack\f[R].
To disable implicit restore, use the \f[C]--no-restore\f[R] option.
.PP
The \f[C]dotnet restore\f[R] command is still useful in certain scenarios where explicitly restoring makes sense, such as continuous integration builds in Azure DevOps Services or in build systems that need to explicitly control when the restore occurs.
.PP
For information about how to manage NuGet feeds, see the \f[C]dotnet restore\f[R] documentation.
.SS Workload manifest downloads
.PP
When you run this command, it initiates an asynchronous background download of advertising manifests for workloads.
If the download is still running when this command finishes, the download is stopped.
For more information, see Advertising manifests.
.SS Arguments
.IP \[bu] 2
\f[B]\f[CB]PROJECT | SOLUTION | DIRECTORY | DLL\f[B]\f[R]
.RS 2
.IP \[bu] 2
Path to the test project.
.IP \[bu] 2
Path to the solution.
.IP \[bu] 2
Path to a directory that contains a project or a solution.
.IP \[bu] 2
Path to a test project \f[I].dll\f[R] file.
.PP
If not specified, it searches for a project or a solution in the current directory.
.RE
.SH OPTIONS
.IP \[bu] 2
\f[B]\f[CB]-a|--test-adapter-path <ADAPTER_PATH>\f[B]\f[R]
.RS 2
.PP
Path to a directory to be searched for additional test adapters.
Only \f[I].dll\f[R] files with suffix \f[C].TestAdapter.dll\f[R] are inspected.
If not specified, the directory of the test \f[I].dll\f[R] is searched.
.RE
.IP \[bu] 2
\f[B]\f[CB]--arch <ARCHITECTURE>\f[B]\f[R]
.RS 2
.PP
Specifies the target architecture.
This is a shorthand syntax for setting the Runtime Identifier (RID), where the provided value is combined with the default RID.
For example, on a \f[C]win-x64\f[R] machine, specifying \f[C]--arch x86\f[R] sets the RID to \f[C]win-x86\f[R].
If you use this option, don\[cq]t use the \f[C]-r|--runtime\f[R] option.
Available since .NET 6 Preview 7.
.RE
.IP \[bu] 2
\f[B]\f[CB]--blame\f[B]\f[R]
.RS 2
.PP
Runs the tests in blame mode.
This option is helpful in isolating problematic tests that cause the test host to crash.
When a crash is detected, it creates a sequence file in \f[C]TestResults/<Guid>/<Guid>_Sequence.xml\f[R] that captures the order of tests that were run before the crash.
.RE
.IP \[bu] 2
\f[B]\f[CB]--blame-crash\f[B]\f[R] (Available since .NET 5.0 preview SDK)
.RS 2
.PP
Runs the tests in blame mode and collects a crash dump when the test host exits unexpectedly.
This option depends on the version of .NET used, the type of error, and the operating system.
.PP
For exceptions in managed code, a dump will be automatically collected on .NET 5.0 and later versions.
It will generate a dump for testhost or any child process that also ran on .NET 5.0 and crashed.
Crashes in native code will not generate a dump.
This option works on Windows, macOS, and Linux.
.PP
Crash dumps in native code, or when using .NET Core 3.1 or earlier versions, can only be collected on Windows, by using Procdump.
A directory that contains \f[I]procdump.exe\f[R] and \f[I]procdump64.exe\f[R] must be in the PATH or PROCDUMP_PATH environment variable.
Download the tools.
Implies \f[C]--blame\f[R].
.PP
To collect a crash dump from a native application running on .NET 5.0 or later, the usage of Procdump can be forced by setting the \f[C]VSTEST_DUMP_FORCEPROCDUMP\f[R] environment variable to \f[C]1\f[R].
.RE
.IP \[bu] 2
\f[B]\f[CB]--blame-crash-dump-type <DUMP_TYPE>\f[B]\f[R] (Available since .NET 5.0 preview SDK)
.RS 2
.PP
The type of crash dump to be collected.
Implies \f[C]--blame-crash\f[R].
.RE
.IP \[bu] 2
\f[B]\f[CB]--blame-crash-collect-always\f[B]\f[R] (Available since .NET 5.0 preview SDK)
.RS 2
.PP
Collects a crash dump on expected as well as unexpected test host exit.
.RE
.IP \[bu] 2
\f[B]\f[CB]--blame-hang\f[B]\f[R] (Available since .NET 5.0 preview SDK)
.RS 2
.PP
Run the tests in blame mode and collects a hang dump when a test exceeds the given timeout.
.RE
.IP \[bu] 2
\f[B]\f[CB]--blame-hang-dump-type <DUMP_TYPE>\f[B]\f[R] (Available since .NET 5.0 preview SDK)
.RS 2
.PP
The type of crash dump to be collected.
It should be \f[C]full\f[R], \f[C]mini\f[R], or \f[C]none\f[R].
When \f[C]none\f[R] is specified, test host is terminated on timeout, but no dump is collected.
Implies \f[C]--blame-hang\f[R].
.RE
.IP \[bu] 2
\f[B]\f[CB]--blame-hang-timeout <TIMESPAN>\f[B]\f[R] (Available since .NET 5.0 preview SDK)
.RS 2
.PP
Per-test timeout, after which a hang dump is triggered and the test host process and all of its child processes are dumped and terminated.
The timeout value is specified in one of the following formats:
.IP \[bu] 2
1.5h, 1.5hour, 1.5hours
.IP \[bu] 2
90m, 90min, 90minute, 90minutes
.IP \[bu] 2
5400s, 5400sec, 5400second, 5400seconds
.IP \[bu] 2
5400000ms, 5400000mil, 5400000millisecond, 5400000milliseconds
.PP
When no unit is used (for example, 5400000), the value is assumed to be in milliseconds.
When used together with data driven tests, the timeout behavior depends on the test adapter used.
For xUnit and NUnit the timeout is renewed after every test case.
For MSTest, the timeout is used for all test cases.
This option is supported on Windows with netcoreapp2.1 and later, on Linux with netcoreapp3.1 and later, and on macOS with net5.0 or later.
Implies \f[C]--blame\f[R] and \f[C]--blame-hang\f[R].
.RE
.IP \[bu] 2
\f[B]\f[CB]-c|--configuration <CONFIGURATION>\f[B]\f[R]
.RS 2
.PP
Defines the build configuration.
The default for most projects is \f[C]Debug\f[R], but you can override the build configuration settings in your project.
.RE
.IP \[bu] 2
\f[B]\f[CB]--collect <DATA_COLLECTOR_NAME>\f[B]\f[R]
.RS 2
.PP
Enables data collector for the test run.
For more information, see Monitor and analyze test run (https://aka.ms/vstest-collect).
.PP
To collect code coverage on any platform that is supported by .NET Core, install Coverlet (https://github.com/coverlet-coverage/coverlet/blob/master/README.md) and use the \f[C]--collect:\[dq]XPlat Code Coverage\[dq]\f[R] option.
.PP
On Windows, you can collect code coverage by using the \f[C]--collect \[dq]Code Coverage\[dq]\f[R] option.
This option generates a \f[I].coverage\f[R] file, which can be opened in Visual Studio 2019 Enterprise.
For more information, see Use code coverage and Customize code coverage analysis.
.RE
.IP \[bu] 2
\f[B]\f[CB]-d|--diag <LOG_FILE>\f[B]\f[R]
.RS 2
.PP
Enables diagnostic mode for the test platform and writes diagnostic messages to the specified file and to files next to it.
The process that is logging the messages determines which files are created, such as \f[C]*.host_<date>.txt\f[R] for test host log, and \f[C]*.datacollector_<date>.txt\f[R] for data collector log.
.RE
.IP \[bu] 2
\f[B]\f[CB]-f|--framework <FRAMEWORK>\f[B]\f[R]
.RS 2
.PP
Forces the use of \f[C]dotnet\f[R] or .NET Framework test host for the test binaries.
This option only determines which type of host to use.
The actual framework version to be used is determined by the \f[I]runtimeconfig.json\f[R] of the test project.
When not specified, the TargetFramework assembly attribute is used to determine the type of host.
When that attribute is stripped from the \f[I].dll\f[R], the .NET Framework host is used.
.RE
.IP \[bu] 2
\f[B]\f[CB]--filter <EXPRESSION>\f[B]\f[R]
.RS 2
.PP
Filters out tests in the current project using the given expression.
For more information, see the Filter option details section.
For more information and examples on how to use selective unit test filtering, see Running selective unit tests.
.RE
.IP \[bu] 2
\f[B]\f[CB]-?|-h|--help\f[B]\f[R]
.RS 2
.PP
Prints out a description of how to use the command.
.RE
.IP \[bu] 2
\f[B]\f[CB]--interactive\f[B]\f[R]
.RS 2
.PP
Allows the command to stop and wait for user input or action.
For example, to complete authentication.
Available since .NET Core 3.0 SDK.
.RE
.IP \[bu] 2
\f[B]\f[CB]-l|--logger <LOGGER>\f[B]\f[R]
.RS 2
.PP
Specifies a logger for test results.
Unlike MSBuild, dotnet test doesn\[cq]t accept abbreviations: instead of \f[C]-l \[dq]console;v=d\[dq]\f[R] use \f[C]-l \[dq]console;verbosity=detailed\[dq]\f[R].
Specify the parameter multiple times to enable multiple loggers.
.RE
.IP \[bu] 2
\f[B]\f[CB]--no-build\f[B]\f[R]
.RS 2
.PP
Doesn\[cq]t build the test project before running it.
It also implicitly sets the - \f[C]--no-restore\f[R] flag.
.RE
.IP \[bu] 2
\f[B]\f[CB]--nologo\f[B]\f[R]
.RS 2
.PP
Run tests without displaying the Microsoft TestPlatform banner.
Available since .NET Core 3.0 SDK.
.RE
.IP \[bu] 2
\f[B]\f[CB]--no-restore\f[B]\f[R]
.RS 2
.PP
Doesn\[cq]t execute an implicit restore when running the command.
.RE
.IP \[bu] 2
\f[B]\f[CB]-o|--output <OUTPUT_DIRECTORY>\f[B]\f[R]
.RS 2
.PP
Directory in which to find the binaries to run.
If not specified, the default path is \f[C]./bin/<configuration>/<framework>/\f[R].
For projects with multiple target frameworks (via the \f[C]TargetFrameworks\f[R] property), you also need to define \f[C]--framework\f[R] when you specify this option.
\f[C]dotnet test\f[R] always runs tests from the output directory.
You can use <xref:System.AppDomain.BaseDirectory%2A?displayProperty=nameWithType> to consume test assets in the output directory.
.RE
.IP \[bu] 2
\f[B]\f[CB]--os <OS>\f[B]\f[R]
.RS 2
.PP
Specifies the target operating system (OS).
This is a shorthand syntax for setting the Runtime Identifier (RID), where the provided value is combined with the default RID.
For example, on a \f[C]win-x64\f[R] machine, specifying \f[C]--os os\f[R] sets the RID to \f[C]os-x64\f[R].
If you use this option, don\[cq]t use the \f[C]-r|--runtime\f[R] option.
Available since .NET 6 Preview 7.
.RE
.IP \[bu] 2
\f[B]\f[CB]-r|--results-directory <RESULTS_DIR>\f[B]\f[R]
.RS 2
.PP
The directory where the test results are going to be placed.
If the specified directory doesn\[cq]t exist, it\[cq]s created.
The default is \f[C]TestResults\f[R] in the directory that contains the project file.
.RE
.IP \[bu] 2
\f[B]\f[CB]--runtime <RUNTIME_IDENTIFIER>\f[B]\f[R]
.RS 2
.PP
The target runtime to test for.
.RE
.IP \[bu] 2
\f[B]\f[CB]-s|--settings <SETTINGS_FILE>\f[B]\f[R]
.RS 2
.PP
The \f[C].runsettings\f[R] file to use for running the tests.
The \f[C]TargetPlatform\f[R] element (x86|x64) has no effect for \f[C]dotnet test\f[R].
To run tests that target x86, install the x86 version of .NET Core.
The bitness of the \f[I]dotnet.exe\f[R] that is on the path is what will be used for running tests.
For more information, see the following resources:
.IP \[bu] 2
Configure unit tests by using a \f[C].runsettings\f[R] file.
.IP \[bu] 2
Configure a test run (https://github.com/Microsoft/vstest-docs/blob/master/docs/configure.md)
.RE
.IP \[bu] 2
\f[B]\f[CB]-t|--list-tests\f[B]\f[R]
.RS 2
.PP
List the discovered tests instead of running the tests.
.RE
.IP \[bu] 2
\f[B]\f[CB]-v|--verbosity <LEVEL>\f[B]\f[R]
.RS 2
.PP
Sets the verbosity level of the command.
Allowed values are \f[C]q[uiet]\f[R], \f[C]m[inimal]\f[R], \f[C]n[ormal]\f[R], \f[C]d[etailed]\f[R], and \f[C]diag[nostic]\f[R].
The default is \f[C]minimal\f[R].
For more information, see <xref:Microsoft.Build.Framework.LoggerVerbosity>.
.RE
.IP \[bu] 2
\f[B]\f[CB]RunSettings\f[B]\f[R] arguments
.PP
Inline \f[C]RunSettings\f[R] are passed as the last arguments on the command line after \[lq]\[en]\[rq] (note the space after \[en]).
Inline \f[C]RunSettings\f[R] are specified as \f[C][name]=[value]\f[R] pairs.
A space is used to separate multiple \f[C][name]=[value]\f[R] pairs.
.PP
Example: \f[C]dotnet test -- MSTest.DeploymentEnabled=false MSTest.MapInconclusiveToFailed=True\f[R]
.PP
For more information, see Passing RunSettings arguments through command line (https://github.com/Microsoft/vstest-docs/blob/master/docs/RunSettingsArguments.md).
.SH EXAMPLES
.IP \[bu] 2
Run the tests in the project in the current directory:
.RS 2
.IP
.nf
\f[C]
dotnet test
\f[R]
.fi
.RE
.IP \[bu] 2
Run the tests in the \f[C]test1\f[R] project:
.RS 2
.IP
.nf
\f[C]
dotnet test \[ti]/projects/test1/test1.csproj
\f[R]
.fi
.RE
.IP \[bu] 2
Run the tests in the project in the current directory, and generate a test results file in the trx format:
.RS 2
.IP
.nf
\f[C]
dotnet test --logger trx
\f[R]
.fi
.RE
.IP \[bu] 2
Run the tests in the project in the current directory, and generate a code coverage file (after installing Coverlet (https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/VSTestIntegration.md) collectors integration):
.RS 2
.IP
.nf
\f[C]
dotnet test --collect:\[dq]XPlat Code Coverage\[dq]
\f[R]
.fi
.RE
.IP \[bu] 2
Run the tests in the project in the current directory, and generate a code coverage file (Windows only):
.RS 2
.IP
.nf
\f[C]
dotnet test --collect \[dq]Code Coverage\[dq]
\f[R]
.fi
.RE
.IP \[bu] 2
Run the tests in the project in the current directory, and log with detailed verbosity to the console:
.RS 2
.IP
.nf
\f[C]
dotnet test --logger \[dq]console;verbosity=detailed\[dq]
\f[R]
.fi
.RE
.IP \[bu] 2
Run the tests in the project in the current directory, and report tests that were in progress when the test host crashed:
.RS 2
.IP
.nf
\f[C]
dotnet test --blame
\f[R]
.fi
.RE
.SS Filter option details
.PP
\f[C]--filter <EXPRESSION>\f[R]
.PP
\f[C]<Expression>\f[R] has the format \f[C]<property><operator><value>[|&<Expression>]\f[R].
.PP
\f[C]<property>\f[R] is an attribute of the \f[C]Test Case\f[R].
The following are the properties supported by popular unit test frameworks:
.PP
.TS
tab(@);
l l.
T{
Test Framework
T}@T{
Supported properties
T}
_
T{
MSTest
T}@T{
T}
T{
xUnit
T}@T{
T}
T{
NUnit
T}@T{
T}
.TE
.PP
The \f[C]<operator>\f[R] describes the relationship between the property and the value:
.PP
.TS
tab(@);
c l.
T{
Operator
T}@T{
Function
T}
_
T{
\f[C]=\f[R]
T}@T{
Exact match
T}
T{
\f[C]!=\f[R]
T}@T{
Not exact match
T}
T{
\f[C]\[ti]\f[R]
T}@T{
Contains
T}
T{
\f[C]!\[ti]\f[R]
T}@T{
Not contains
T}
.TE
.PP
\f[C]<value>\f[R] is a string.
All the lookups are case insensitive.
.PP
An expression without an \f[C]<operator>\f[R] is automatically considered as a \f[C]contains\f[R] on \f[C]FullyQualifiedName\f[R] property (for example, \f[C]dotnet test --filter xyz\f[R] is same as \f[C]dotnet test --filter FullyQualifiedName\[ti]xyz\f[R]).
.PP
Expressions can be joined with conditional operators:
.PP
.TS
tab(@);
l l.
T{
Operator
T}@T{
Function
T}
_
T{
|
T}@T{
OR \  \  \ 
T}
T{
\f[C]&\f[R]
T}@T{
AND
T}
.TE
.PP
You can enclose expressions in parenthesis when using conditional operators (for example, \f[C](Name\[ti]TestMethod1) | (Name\[ti]TestMethod2)\f[R]).
.PP
For more information and examples on how to use selective unit test filtering, see Running selective unit tests.
.SS See also
.IP \[bu] 2
Frameworks and Targets
.IP \[bu] 2
\&.NET Runtime Identifier (RID) catalog
.IP \[bu] 2
Passing runsettings arguments through commandline (https://github.com/Microsoft/vstest-docs/blob/master/docs/RunSettingsArguments.md)
