<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>$(SdkTargetFramework)</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsTestProject>true</IsTestProject>
    <OutputType>Exe</OutputType>
    <CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="System.CommandLine" />
    <PackageReference Include="FluentAssertions" />
    <PackageReference Include="xunit" />
    <PackageReference Include="Verify.Xunit" />
    <PackageReference Include="Verify.DiffPlex" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\..\src\System.CommandLine.StaticCompletions\System.CommandLine.StaticCompletions.csproj" />
    <ProjectReference Include="..\Microsoft.NET.TestFramework\Microsoft.NET.TestFramework.csproj" />
  </ItemGroup>

  <ItemGroup>
    <Compile Remove="snapshots/**/*" />
    <!--
      Adding the snapshots to the build output triggers the diff-comparison logic on them,
      instead of the ones in the project dir. This is required for CI scenarios, but
      hinders the local developer experience. So we just don't add them for local builds.
    -->
    <Content Condition="'$(CI)' != ''" Include="snapshots/**/*" CopyToOutputDirectory="PreserveNewest" />
  </ItemGroup>

</Project>
